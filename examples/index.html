<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <style>.nrr{ padding-left: 1em; } .aud:hover { background-color: lavender; cursor: pointer; }</style>
    <script>var gAudioStopTime = 0;
function main() {
  const audioElem = document.getElementById('audsrc');
  const spans = document.getElementsByClassName('aud');
  console.assert(spans.length == gIntervals.length, 'number of span.aud elements need to match length of intervals array');
  audioElem.addEventListener('timeupdate', (ev) => {
    if (audioElem.currentTime > gAudioStopTime) audioElem.pause();
  });
  for (let i = 0; i < spans.length; i++) {
    addAudioPlayOnClick(spans[i], audioElem, gIntervals[i][0], gIntervals[i][1]);
  }
}
function addAudioPlayOnClick(spanElem, audioElem, start, stop) {
  spanElem.addEventListener('click', (mouseEv) => {
    gAudioStopTime = stop;
    audioElem.currentTime = start;
    audioElem.play();
  })
}
var gIntervals = [[21.237,22.186],[22.936,25.427],[25.568,29.175],[30.245,31.393],[31.487,36.428],[36.708,39.93],[41.026,42.942],[42.964,44.822],[44.928,47.547],[48.212,50.786],[51.093,55.44],[56.192,57.214],[57.26,60.682],[60.705,62.386],[62.984,65.904],[66.157,69.244],[69.511,76.081],[77.195,79.328],[79.903,82.721],[82.755,87.266],[88.726,92.67],[93.588,95.779],[96.03,99.255],[100.576,104.186],[105.03,109.593],[110.595,113.44],[113.668,116.901],[117.943,122.975],[123.069,126.86],[127.76,132.127],[133.531,137.433],[138.131,142.898],[142.968,145.354],[146.373,148.937],[149.669,153.085],[153.245,155.729],[155.786,159.8],[160.69,164.968],[165.004,167.598],[169.062,170.901],[170.915,172.865],[172.89,176.558],[177.329,178.601],[178.665,180.822],[180.833,184.376],[184.515,188.563],[189.143,194.039],[194.705,200.548],[201.142,205.46],[206.642,210.494],[210.596,216.186],[217.489,224.049],[224.792,227.249],[227.99,231.262],[231.286,237.697],[238.623,244.849],[245.816,249.683],[249.882,254.451],[254.85,259.099],[259.16,261.716],[262.146,265.95],[266.391,269.023],[269.64,270.518],[270.522,273.293],[273.862,276.215],[276.792,279.625],[279.708,283.211],[283.64,288.774],[289.609,293.497],[293.629,296.197],[296.946,305.238]];
window.onload = main;</script>
  </head>
  <body>
    <h2>example of subnsnub output</h2>
    <p><a href="https://librivox.org/gongitsune-by-nankichi-niimi/">ごん狐 (Gon Gitsune) by Nankichi Niimi (1913 - 1943)</a></p>
    <ul>
      <li>Full text: <a href="gongitsune.txt">gongitsune.txt</a></li>
      <li>Subtitles chapter 1: <a href="gongitsune_01_niimi.srt">gongitsune_01_niimi.srt</a></li>
      <li>Audio chapter 1: <a href="gongitsune_01_niimi.ogg">gongitsune_01_niimi.ogg</a></li>
    </ul>
    <h3>generated content starts here</h3>
    <audio id="audsrc" src="gongitsune_01_niimi.ogg"></audio>
    <p class="nrr">
      <span class="aud">一</span>
    </p>
    <p class="nrr">
      <span class="aud">
        これは、
        <ruby>
          私
          <rt>わたし</rt>
        </ruby>
        が小さいときに、
      </span>
      <span class="aud">
        村の
        <ruby>
          茂平
          <rt>もへい</rt>
        </ruby>
        というおじいさんからきいたお話です。
      </span>
    </p>
    <p class="nrr">
      <span class="aud">むかしは、</span>
      <span class="aud">
        私たちの村のちかくの、
        <ruby>
          中山
          <rt>なかやま</rt>
        </ruby>
        というところに小さなお城があって、
      </span>
      <span class="aud">中山さまというおとのさまが、おられたそうです。</span>
    </p>
    <p class="nrr">
      <span class="aud">その中山から、</span>
      <span class="aud">少しはなれた山の中に、</span>
      <span class="aud">
        「ごん
        <ruby>
          狐
          <rt>ぎつね</rt>
        </ruby>
        」という狐がいました。
      </span>
      <span class="aud">
        ごんは、
        <ruby>
          一人
          <rt>ひとり</rt>
        </ruby>
        ぼっちの小狐で、
      </span>
      <span class="aud">の一ぱいしげった森の中に穴をほって住んでいました。</span>
      <span class="aud">そして、</span>
      <span class="aud">夜でも昼でも、あたりの村へ出てきて、</span>
      <span class="aud">いたずらばかりしました。</span>
      <span class="aud">はたけへ入って芋をほりちらしたり、</span>
      <span class="aud">

        <ruby>
          菜種
          <rt>なたね</rt>
        </ruby>
        の、ほしてあるのへ火をつけたり、
      </span>
      <span class="aud">

        <ruby>
          百姓家
          <rt>ひゃくしょうや</rt>
        </ruby>
        の裏手につるしてあるとんがらしをむしりとって、いったり、いろんなことをしました。
      </span>
    </p>
    <p class="nrr">
      <span class="aud">
        <ruby>
          或
          <rt>ある</rt>
        </ruby>
        <ruby>
          秋
          <rt>あき</rt>
        </ruby>
        のことでした。
      </span>
      <span class="aud">
        二、三日雨がふりつづいたその
        <ruby>
          間
          <rt>あいだ</rt>
        </ruby>
        、
      </span>
      <span class="aud">ごんは、外へも出られなくて穴の中にしゃがんでいました。</span>
    </p>
    <p class="nrr">
      <span class="aud">雨があがると、ごんは、ほっとして穴からはい出ました。</span>
      <span class="aud">空はからっと晴れていて、</span>
      <span class="aud">

        <ruby>
          百舌鳥
          <rt>もず</rt>
        </ruby>
        の声がきんきん、ひびいていました。
      </span>
    </p>
    <p class="nrr">
      <span class="aud">
        ごんは、村の
        <ruby>
          小川
          <rt>おがわ</rt>
        </ruby>
        の
        <ruby>
          堤
          <rt>つつみ</rt>
        </ruby>
        まで出て来ました。
      </span>
      <span class="aud">あたりの、すすきの穂には、まだ雨のしずくが光っていました。</span>
      <span class="aud">
        川は、いつもは水が
        <ruby>
          少
          <rt>すくな</rt>
        </ruby>
        いのですが、
      </span>
      <span class="aud">三日もの雨で、水が、どっとましていました。</span>
      <span class="aud">
        ただのときは水につかることのない、川べりのすすきや、
        <ruby>
          萩
          <rt>はぎ</rt>
        </ruby>
        の株が、
      </span>
      <span class="aud">黄いろくにごった水に横だおしになって、もまれています。</span>
      <span class="aud">
        ごんは
        <ruby>
          川下
          <rt>かわしも</rt>
        </ruby>
        の方へと、ぬかるみみちを歩いていきました。
      </span>
    </p>
    <p class="nrr">
      <span class="aud">ふと見ると、川の中に人がいて、何かやっています。</span>
      <span class="aud">見つからないように、そうっと草の深いところへ歩きよって、</span>
      <span class="aud">そこからじっとのぞいてみました。</span>
    </p>
    <p class="dlg">
      <span class="aud">
        「
        <ruby>
          兵十
          <rt>ひょうじゅう</rt>
        </ruby>
        だな」と、ごんは思いました。
      </span>
      <span class="aud">兵十はぼろぼろの黒いきものをまくし上げて、</span>
      <span class="aud">腰のところまで水にひたりながら、</span>
      <span class="aud">魚をとる、という、網をゆすぶっていました。</span>
      <span class="aud">はちまきをした顔の横っちょうに、まるい萩の葉が一まい、</span>
      <span class="aud">
        大きな
        <ruby>
          黒子
          <rt>ほくろ</rt>
        </ruby>
        みたいにへばりついていました。
      </span>
    </p>
    <p class="nrr">
      <span class="aud">しばらくすると、兵十は、</span>
      <span class="aud">網の一ばんうしろの、</span>
      <span class="aud">袋のようになったところを、水の中からもちあげました。</span>
      <span class="aud">その中には、</span>
      <span class="aud">芝の根や、草の葉や、</span>
      <span class="aud">くさった木ぎれなどが、ごちゃごちゃはいっていましたが、</span>
      <span class="aud">でもところどころ、白いものがきらきら光っています。</span>
      <span class="aud">それは、ふといの腹や、大きなの腹でした。</span>
      <span class="aud">兵十は、びくの中へ、そのうなぎやきすを、ごみと一しょにぶちこみました。</span>
      <span class="aud">そして、また、袋の口をしばって、水の中へ入れました。</span>
    </p>
    <p class="nrr">
      <span class="aud">
        兵十はそれから、びくをもって川から
        <ruby>
          上
          <rt>あが</rt>
        </ruby>
        り
      </span>
      <span class="aud">
        びくを
        <ruby>
          土手
          <rt>どて</rt>
        </ruby>
        においといて、何をさがしにか、
        <ruby>
          川上
          <rt>かわかみ</rt>
        </ruby>
        の方へかけていきました。
      </span>
    </p>
    <p class="nrr">
      <span class="aud">兵十がいなくなると、ごんは、ぴょいと草の中からとび出して、びくのそばへかけつけました。</span>
      <span class="aud">ちょいと、いたずらがしたくなったのです。</span>
      <span class="aud">ごんはびくの中の魚をつかみ出しては、</span>
      <span class="aud">
        網のかかっているところより
        <ruby>
          下手
          <rt>しもて</rt>
        </ruby>
        の川の中を目がけて、ぽんぽんなげこみました。
      </span>
      <span class="aud">どの魚も、「とぼん」と音を立てながら、にごった水の中へもぐりこみました。</span>
    </p>
    <p class="nrr">
      <span class="aud">一ばんしまいに、太いうなぎをつかみにかかりましたが、</span>
      <span class="aud">何しろぬるぬるとすべりぬけるので、手ではつかめません。</span>
      <span class="aud">ごんはじれったくなって、頭をびくの中につッこんで、</span>
      <span class="aud">うなぎの頭を口にくわえました。</span>
      <span class="aud">うなぎは、キュッと言ってごんの首へまきつきました。</span>
      <span class="aud">そのとたんに兵十が、向うから、</span>
    </p>
    <p class="dlg">
      <span class="aud">「うわア</span>
      <span class="aud">ぬすと狐め」と、どなりたてました。</span>
      <span class="aud">ごんは、びっくりしてとびあがりました。</span>
      <span class="aud">うなぎをふりすててにげようとしましたが、</span>
      <span class="aud">うなぎは、ごんの首にまきついたままはなれません。</span>
      <span class="aud">ごんはそのまま横っとびにとび出して一しょうけんめいに、にげていきました。</span>
    </p>
    <p class="nrr">
      <span class="aud">ほら穴の近くの、の木の下でふりかえって見ましたが、</span>
      <span class="aud">兵十は追っかけては来ませんでした。</span>
    </p>
    <p class="nrr">
      <span class="aud">ごんは、ほっとして、うなぎの頭をかみくだき、やっとはずして穴のそとの、草の葉の上にのせておきました。</span>
    </p>
  </body>
</html>
